# SISPS Integration Tests

This subdirectory contains integration tests for the SISPS-PV-MCU project.

> _Integration tests are tests that test the interoperation of multiple components. Borrowed from conventional programming terminology; in this embedded project these "integration" tests are used to collectively test the functionality of the SISPS-PV-PCB board as a whole._

## Methodology

### Peripheral ICs

Each individual peripheral IC on the SISPS-PV-PCB board is tested in isolation. Specific details of each test are documented in the `main.cpp` source file of each test. In general however:

1. The peripheral IC is set default or minimal configuration.
1. Constant-return methods are called to verify communication.
1. Read-only operations are performed to verify any available sensory information.
1. Configurable settings are modified and config changes verified.
1. Operation under modified configuration is verified.
1. Results are displayed via the LEDs on the SISPS-PV-PCB board.
1. The peripheral is reset to default conditions.
1. The test repeats forever.

## Building the Tests

Each test is an independent executable that can be built and flashed to the SISPS-PV-PCB board, much alike the main application.

> Note, some constant and autogenerated source files are symlinked from the main application to the test directories. This is to ensure that the tests are built with the same configuration as the main application.

By default, all tests are built with the main executable, however this may be disabled via the option `SISPS_EXCLUDE_INTEGRATION_TESTS_FROM_ALL`.

## Running the tests

Once built, each test can be flashed to the board using the same flashing/debugging method as the main application.

## Human-in-the-Loop Testing

Test results are displayed via the LEDs on the SISPS-PV-PCB board. Each test outlines the expected pattern of LED flashes in its documentation.

**Typically, all LEDs flashing approximately once per second indicates success.**

> Future enhancements to the project may include automating sequentially flashing and running all tests, however result checking requires hardware changes to the SISPS-PV-PCB board to allow for feedback to the debugger, and therefore this feature is left for a later revision.
